# Concurrency

# 並行処理の難しさ

ディスク使用率の高さ、ログインユーザー数の増加など、何かをきっかけで、突然バグが発生する可能性があるため。

## 競合状態

2つ以上の操作が正しい順番で実行されなければいけないところで、プログラムが順番を保証するようにかかれていないときに発生する。

例:

```go
var data int
go func() {
  data++
}()

if data == 0 {
  fmt.Printf("the v is %v.\n", data)
}

```

## アトミック性

ある操作を行なうときに他者がその操作に割り込めないこと。
アトミックであれば、複数の並行なコンテキストで安全に扱えることが暗黙に保証されていること。

## デッドロック

すべての並行なプロセスがお互いの処理を待ち合っている状態

## ライブロック

並行処理を行っているが、その処理がプログラムの状態を進めていない状態

## リソース枯渇

並行プロセスが仕事をするのに必要なリソースを取得できない状況

# 基礎

## 合流ポイント

プログラムの正当性を保証し競合状態を取り除く。

```go
var wg sync.WaitGroup
sayH := func() {
  defer wg.Done()
  fmt.Println("H")
}

wg.Add(1)
go sayH()
wg.Wait() //合流ポイント
```

## Mutex 

並行処理で安全な方法で共有リソースに対すrう排他的アクセスを提供する。

※ チャネルは通信によってメモリを共有、Mutexは開発者が守らなければならないメモリに対する同期アクセスの習慣を作ることでメモリを共有する。

## Cond

ゴルーチンが待機したりイベントの発生を知らせるためのポイント





